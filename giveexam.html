<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AlgoPlay | Teacher Exam Builder</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    *{
      margin:0;
      padding:0;
      box-sizing:border-box;
      font-family:'Inter',sans-serif;
    }

    body{
      background:radial-gradient(circle at top,#1e1e2f,#0f0f17);
      color:white;
      min-height:100vh;
    }

    header{
      padding:20px 60px;
      border-bottom:1px solid #2a2a3d;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    header h1{ color:#6ee7ff; }

    .container{
      max-width:900px;
      margin:40px auto;
      padding:30px;
      background:#020617;
      border-radius:18px;
      border:1px solid #1e293b;
    }

    h2{
      margin-bottom:15px;
      color:#6ee7ff;
    }

    label{
      font-size:14px;
      color:#9ca3af;
      margin-top:15px;
      display:block;
    }

    input,textarea,select{
      width:100%;
      margin-top:6px;
      padding:12px;
      border-radius:10px;
      border:1px solid #2a2a3d;
      background:#0f172a;
      color:white;
    }

    textarea{ resize:none; }

    button{
      margin-top:20px;
      padding:14px;
      width:100%;
      border:none;
      border-radius:12px;
      font-weight:600;
      cursor:pointer;
      background:linear-gradient(90deg,#6ee7ff,#3b82f6);
      color:#020617;
    }

    .divider{
      height:1px;
      background:#2a2a3d;
      margin:35px 0;
    }

    .success{
      color:#22c55e;
      margin-top:10px;
    }
  </style>
</head>

<body>

<header>
  <h1>AlgoPlay</h1>
  <span>Teacher · Exam Builder</span>
</header>

<div class="container">

  <!-- CREATE EXAM -->
  <h2>Create New Exam</h2>

  <label>Exam Title</label>
  <input id="title" placeholder="Unit Test – Physics">

  <label>Subject</label>
  <input id="subject" placeholder="Physics">

  <label>Duration (minutes)</label>
  <input id="duration" type="number" placeholder="30">

  <label>Teacher ID</label>
  <input id="teacherId" placeholder="Enter your teacher ID">

  <button onclick="createExam()">Create Exam</button>
  <div id="examStatus" class="success"></div>

  <div class="divider"></div>

  <!-- ADD QUESTIONS -->
  <h2>Add MCQ Question</h2>

  <label>Exam ID</label>
  <input id="examId" placeholder="Paste exam ID here">

  <label>Question</label>
  <textarea id="question" rows="3" placeholder="Enter question"></textarea>

  <label>Option A</label>
  <input id="A">

  <label>Option B</label>
  <input id="B">

  <label>Option C</label>
  <input id="C">

  <label>Option D</label>
  <input id="D">

  <label>Correct Option</label>
  <select id="correct">
    <option value="">Select</option>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
  </select>

  <button onclick="addQuestion()">Upload Question</button>
  <div id="questionStatus" class="success"></div>

</div>

<script>
const API = "http://localhost:5000";

function createExam(){
  fetch(API+"/exam/create",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      title:title.value,
      subject:subject.value,
      duration:duration.value,
      teacher_id:teacherId.value
    })
  })
  .then(res=>res.json())
  .then(data=>{
    examStatus.innerText = "Exam Created! Exam ID: " + data.exam_id;
    examId.value = data.exam_id;
  });
}

function addQuestion(){
  fetch(`${API}/exam/${examId.value}/add-question`,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      question:question.value,
      A:A.value,
      B:B.value,
      C:C.value,
      D:D.value,
      correct:correct.value
    })
  })
  .then(res=>res.json())
  .then(()=>{
    questionStatus.innerText = "Question uploaded successfully!";
    question.value=A.value=B.value=C.value=D.value="";
    correct.value="";
  });
}
</script>

</body>
</html>
